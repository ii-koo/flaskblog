{% extends "layouts/base.html" %}
{% block content %}
    {% for post in posts %}
        <article class="media content-section">
          <img class="rounded-circle article-img" src="{{ url_for('static', filename='img/profile/' + post.author.image_file) }}">
          <div class="media-body">
            <div class="article-metadata">
              <a class="mr-2" href="#">{{ post.author.username }}</a>
              <small class="text-muted"> on {{ post.date_created.strftime('%Y-%m-%d') }}</small>
            </div>
            <h2><a class="article-title" href="{{ url_for('postDetail', post_id=post.id ) }}">{{ post.title }}</a></h2>
            <p class="article-content">
                {% if post.content|length >= 300 %}
                    {{ post.content|safe|truncate(300) }} <a href="{{ url_for('postDetail', post_id=post.id ) }}" class="text-decoration-none">read more</a>
                {% else %}
                    {{ post.content|safe }}
                {% endif %}
            </p>
            <a class="small text-secondary"><i class="fa fa-eye">{{ post.viewed }}</i></a>
          </div>
        </article>
    {% endfor %}
{% endblock content %}